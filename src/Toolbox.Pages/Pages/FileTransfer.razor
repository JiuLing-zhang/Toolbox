@page "/file-transfer"

@inject NavigationManager NavigationManager

<PageTitle>码术 - 文件传输</PageTitle>

<MudPaper Width="100%" Elevation="0">
    <MudContainer MaxWidth="MaxWidth.Small">
        <MudPaper Width="100%"
                  Square="true"
                  Elevation="0"
                  Class="pa-5 mt-10">
            <MudText Style="text-align: center;">文件传输</MudText>

            <MudCard Class="mt-10">
                <MudCardContent>
                    <MudText Typo="Typo.body2">需要发送文件？</MudText>
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Text"
                               Color="Color.Info"
                               OnClick="@(async () => await GotoSenderPageAsync())">创建房间</MudButton>
                </MudCardActions>
            </MudCard>

            <MudCard Class="mt-5">
                <MudCardContent>
                    <MudText Typo="Typo.body2">需要接收文件？</MudText>
                </MudCardContent>
                <MudCardActions>

                    <MudTextField @bind-Value="RoomId"
                                  Label="请输入对方房间号连接"
                                  Variant="Variant.Outlined"
                                  Adornment="Adornment.End"
                                  AdornmentIcon="@Icons.Material.Filled.JoinInner"
                                  AdornmentColor="Color.Info"
                                  OnAdornmentClick="@(async () => await GotoReceiverPageAsync())" />
                </MudCardActions>
            </MudCard>
        </MudPaper>
    </MudContainer>
</MudPaper>
@code
{
    public string? RoomId { get; set; }
    private Task GotoSenderPageAsync()
    {
        NavigationManager.NavigateTo($"/file-transfer/sender");
        return Task.CompletedTask;
    }
    private Task GotoReceiverPageAsync()
    {
        NavigationManager.NavigateTo($"/file-transfer/receiver/{RoomId}");
        return Task.CompletedTask;
    }
}
